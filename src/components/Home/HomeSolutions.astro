---
// Data
import { solutions } from '@consts';
// Components
import ButtonPrimary from '@components/Button/ButtonPrimary.astro';
import ColumnBackground from '@components/ColumnBackground.astro';
---

<article class="bg-[#000]">
	<div class="container__wide relative py-24 md:py-36">
		<header class="relative z-10 mb-8 text-center md:mb-12 lg:mb-[72px]">
			<h2 class="fade-in section__title mb-6 text-white">
				<span class="font-bold">Software <br class="sm:hidden" />That's Built to Ship</span>
				<br />and Stick Around
			</h2>
			<p class="fade-in section__text mx-auto max-w-screen-md text-text-secondary">
				We build products that make your business more capable, more efficient, and more scalable. Whether you need an
				MVP, a high-performing AI agent, workflow automation, or user-friendly internal tools: weâ€™ll get it done. No
				gimmicks, no empty promises.
			</p>
		</header>

		<section id="solutions-gallery" class="relative z-10">
			<ul class="swiper-wrapper fade-in grid-cols-3 lg:grid">
				{
					solutions.map((solution) => (
						<li class="swiper-slide">
							<article class="flex h-full flex-col rounded-xl bg-white px-5 py-6 text-center shadow-md">
								<header class="mb-6 flex flex-col items-center gap-[14px]">
									<h3 class="font-titles text-[22px] leading-[1.09] md:text-[28px]">
										<span class="font-bold">{solution.name}</span>
										<br />
										{solution.cardText}
									</h3>
								</header>
								<p class="text-balance font-bold leading-[1.45] text-tertiary md:text-lg">{solution.strong}</p>
								<p class="mb-4 text-pretty text-base leading-[1.45] text-tertiary md:text-lg">{solution.description}</p>
								<ButtonPrimary
									classes="h-12 mt-auto w-full max-w-"
									link={true}
									href={solution.href}
									label="Learn More"
									theme="dark"
									fullWidth={true}
								/>
							</article>
						</li>
					))
				}
			</ul>
		</section>
		<ColumnBackground zIndex="0" color="bg-slate-900" />
	</div>
</article>

<style>
	.swiper-slide {
		height: auto;
	}
	@media (min-width: 1024px) {
		ul.swiper-wrapper {
			display: grid;
			grid-template-columns: repeat(3, 1fr);
			gap: 24px;
		}
	}
</style>

<script>
	import Swiper from 'swiper';
	import type { SwiperOptions, Swiper as SwiperInstance } from 'swiper/types';
	import 'swiper/css';

	let swiper: SwiperInstance | null = null;
	const breakpoint = 1024;

	const initSwiper = (): void => {
		if (window.innerWidth < breakpoint && !swiper) {
			const options: SwiperOptions = {
				freeMode: true,
				slidesPerView: 1.1,
				spaceBetween: 24,
				breakpoints: {
					440: {
						slidesPerView: 1.3,
					},
					500: {
						slidesPerView: 1.5,
					},
					620: {
						slidesPerView: 1.8,
					},
					680: {
						slidesPerView: 2.1,
					},
					768: {
						slidesPerView: 2.4,
					},
					956: {
						slidesPerView: 2.8,
					},
				},
			};
			swiper = new Swiper('#solutions-gallery', options);
		} else if (window.innerWidth >= breakpoint && swiper) {
			swiper.destroy(true, true);
			swiper = null;
		}
	};

	document.addEventListener('DOMContentLoaded', initSwiper);

	window.addEventListener('resize', () => {
		initSwiper();
	});
</script>
