---
export interface Props {
  src: string; // URL to the Lottie JSON file
  width?: string;
  height?: string;
  autoplay?: boolean;
  loop?: boolean;
  className?: string;
  id: string; // Unique ID for each animation
}

const { 
  src, 
  width = '100%', 
  height = '400px', 
  autoplay = true, 
  loop = true, 
  className = '',
  id
} = Astro.props;
---

<div 
  id={id} 
  class={`lottie-container ${className}`}
  data-src={src}
  data-autoplay={autoplay}
  data-loop={loop}
  style={`width: ${width}; height: ${height};`}
></div>

<script>
  import lottie from 'lottie-web';

  // Initialize all Lottie animations on the page
  document.addEventListener('DOMContentLoaded', () => {
    const containers = document.querySelectorAll('.lottie-container');
    
    containers.forEach((container) => {
      const element = container as HTMLElement;
      const src = element.dataset.src;
      const autoplay = element.dataset.autoplay === 'true';
      const loop = element.dataset.loop === 'true';
      
      if (src) {
        lottie.loadAnimation({
          container: element,
          renderer: 'svg',
          loop: loop,
          autoplay: autoplay,
          path: src
        });
      }
    });
  });
</script>

<style>
  .lottie-container {
    display: flex;
    align-items: center;
    justify-content: center;
  }
</style>